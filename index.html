<script>
let walletConnected = false;

async function connectWallet() {
  if (!window.ethereum) {
    alert("OKX Wallet não detectada.");
    return;
  }

  try {
    // pede conexão
    await window.ethereum.request({
      method: "eth_requestAccounts"
    });

    // NÃO atualiza a tela agora
    // aguarda o evento da carteira
  } catch (e) {
    console.error(e);
    alert("Conexão cancelada.");
  }
}

// escuta quando a OKX termina a ação
if (window.ethereum) {
  window.ethereum.on("accountsChanged", function (accounts) {
    if (accounts.length > 0) {
      walletConnected = true;
      document.getElementById("status").innerText =
        "Conectado: " + accounts[0];
    } else {
      document.getElementById("status").innerText =
        "Status: Desconectado";
    }
  });
}
</script>



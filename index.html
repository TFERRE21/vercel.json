<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Memebot ‚Äî OKX</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial; background:#f4f4f4; padding:20px }
.card { background:#fff; padding:20px; border-radius:8px; max-width:900px }
button { padding:8px 12px; margin-right:8px }
table { width:100%; border-collapse:collapse; margin-top:10px }
th,td { border:1px solid #ccc; padding:6px; font-size:13px }
</style>
</head>
<body>

<h2>ü§ñ Memebot ‚Äî OKX</h2>

<div class="card">
  <button onclick="start()">‚ñ∂ Ligar</button>
  <button onclick="stop()">‚èπ Parar</button>

  <h3>Status</h3>
  <pre id="status"></pre>

  <h3>Trades</h3>
  <table>
    <thead>
      <tr>
        <th>Token</th>
        <th>Status</th>
        <th>Entrada</th>
        <th>Alvo</th>
        <th>Lucro Est.</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
  </table>

  <h3>Lucro Total</h3>
  <strong id="lucro">0</strong>

  <h3>Gr√°fico</h3>
  <canvas id="grafico"></canvas>
</div>

<script>
const API = "https://SEU_BACKEND_AQUI";

async function start() {
  await fetch(API + "/start", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      network:"solana",
      minCap:30,
      tradeValueBRL:100,
      takeProfit:20
    })
  });
}

async function stop() {
  await fetch(API + "/stop", { method:"POST" });
}

const ctx = document.getElementById("grafico");
const chart = new Chart(ctx, {
  type:"line",
  data:{ labels:[], datasets:[{ label:"Lucro", data:[] }] }
});

async function sync() {
  const r = await fetch(API + "/status");
  const d = await r.json();

  status.textContent = JSON.stringify(d, null, 2);
  lucro.textContent = d.totalLucro || 0;

  rows.innerHTML = "";
  (d.simulacoes || []).forEach(t => {
    rows.innerHTML += `
      <tr>
        <td>${t.token}</td>
        <td>${t.status}</td>
        <td>${t.entrada}</td>
        <td>${t.alvo}</td>
        <td>${t.lucroEstimado}</td>
      </tr>`;
  });

  chart.data.labels.push(new Date().toLocaleTimeString());
  chart.data.datasets[0].data.push(d.totalLucro || 0);
  chart.update();
}

setInterval(sync, 5000);
sync();
</script>

</body>
</html>

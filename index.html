<script>
async function connectWallet() {
  if (!window.ethereum) {
    alert("OKX Wallet não detectada.");
    return;
  }

  try {
    // pede conexão
    const accounts = await window.ethereum.request({
      method: "eth_requestAccounts"
    });

    if (accounts.length > 0) {
      document.getElementById("status").innerText =
        "Conectado: " + accounts[0];
    }

    // escuta troca de conta (OKX usa isso)
    window.ethereum.on("accountsChanged", function (accounts) {
      if (accounts.length > 0) {
        document.getElementById("status").innerText =
          "Conectado: " + accounts[0];
      } else {
        document.getElementById("status").innerText =
          "Status: Desconectado";
      }
    });

  } catch (e) {
    console.error(e);
    alert("Conexão cancelada ou erro.");
  }
}
</script>


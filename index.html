<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Memebot ‚Äî Solana</title>
<style>
body { font-family: Arial; background:#f7f7f7; padding:30px }
.card { background:#fff; padding:20px; border-radius:8px; max-width:600px }
label { display:block; margin-top:12px }
input, button { width:100%; padding:10px; margin-top:6px }
button { cursor:pointer }
.status { background:#eee; padding:10px; margin-top:10px }
table { width:100%; margin-top:15px; border-collapse:collapse }
td, th { border:1px solid #ccc; padding:6px; font-size:13px }
</style>
</head>
<body>

<h2>ü§ñ Memebot ‚Äî Solana</h2>

<div class="card">
  <label>Market Cap m√≠nimo (USD)</label>
  <input id="minCap" type="number" value="30">

  <label>Valor por trade (R$)</label>
  <input id="tradeValue" type="number" value="100">

  <label>Take Profit (%)</label>
  <input id="takeProfit" type="number" value="20">

  <button onclick="startBot()">‚ñ∂Ô∏è Ligar bot</button>
  <button onclick="stopBot()">‚èπÔ∏è Parar bot</button>

  <div class="status" id="status">Status: parado</div>

  <h3>Simula√ß√µes</h3>
  <table>
    <thead>
      <tr>
        <th>Token</th><th>DEX</th><th>Entrada</th>
        <th>Alvo</th><th>Lucro R$</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
  </table>

  <h3>Total lucro estimado: R$ <span id="lucro">0</span></h3>
</div>

<script>
const API = "https://memebot-dryrun.onrender.com";

async function startBot() {
  const config = {
    network: "solana",
    minCap: Number(minCap.value),
    tradeValueBRL: Number(tradeValue.value),
    takeProfit: Number(takeProfit.value)
  };

  await fetch(API + "/start", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(config)
  });
}

async function stopBot() {
  await fetch(API + "/stop", { method: "POST" });
}

async function sync() {
  const r = await fetch(API + "/status");
  const s = await r.json();

  status.innerText = s.ligado ? "Status: LIGADO" : "Status: PARADO";
  rows.innerHTML = "";
  lucro.innerText = s.totalLucro?.toFixed(2) || 0;

  (s.simulacoes || []).forEach(sim => {
    rows.innerHTML += `
      <tr>
        <td>${sim.token}</td>
        <td>${sim.dex}</td>
        <td>${sim.entrada}</td>
        <td>${sim.alvo}</td>
        <td>${sim.lucroEstimado?.toFixed(2)}</td>
      </tr>`;
  });
}

setInterval(sync, 5000);
sync();
</script>

</body>
</html>
